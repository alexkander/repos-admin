{{#> layout }}
<div>{{> nav }}</div>
<div>{{> alerts }}</div>
<div class="container-fluid">
  <div class="row">
    <div class="col">
      <button
        class="btn btn-info app--buttonRequestAction"
        data-app--url="/remote/fetchRemotesByGroup/all"
        data-app--method="PUT"
      >
        Fetch all remotes
      </button>
      <button
        class="btn btn-info app--buttonRequestAction"
        data-app--url="/remote/fetchRemotesByGroup/fetchStatusError"
        data-app--method="PUT"
      >
        Fetch remotes with fetch error
      </button>
      <button
        class="btn btn-info app--buttonRequestAction"
        data-app--url="/remote/fetchRemotesByGroup/fetchStatusError"
        data-app--method="PUT"
      >
        Fetch remotes not fetched yet
      </button>
    </div>
    <div class="col">
      {{> recordsCountLabel totalCount=totalCount records=records }}
    </div>
  </div>
  <table class="table table-sm">
    <thead>
      <tr>
        <th>#</th>
        {{> tableHeader fields=fields sortValues=searchQuery.sort allowSort=true
        }}
      </tr>
      <tr class="app--searchBoxesWrapper">
        <td></td>
        {{> tableSearchInputs fields=fields searchValues=searchQuery.search }}
      </tr>
    </thead>
    <tbody>
      {{#each records }}
      <tr>
        <td>{{ addOne @index }}</td>
        {{> tableRow fields=../fields }}
        <td class="text-nowrap">
          <a
            class="link-secondary app--pointer app--buttonRequestAction"
            data-app--url="/remote/{{ _id }}/sync"
            data-app--method="POST"
          >
            [sync]
          </a>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
</div>
<script src="/js/tableHandler.js"></script>
<script src="/js/buttonRequestAction.js"></script>
{{/layout}}
